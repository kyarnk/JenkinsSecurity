# JenkinsSecurity

Тестовый репозиторий, демонстрирующий реализацию CI/CD пайплайна для автоматизированной проверки безопасности программного обеспечения с использованием Jenkins и кастомной библиотеки `security-library`.

## Состав репозитория

- `juice-shop/` — исходный код тестового уязвимого приложения [OWASP Juice Shop](https://owasp.org/www-project-juice-shop/), используемого в качестве цели для сканирования.
- `main.tf` — тестовый Terraform-конфигурационный файл с заведомыми уязвимостями для анализа средствами инфраструктурного SAST (KICS).
- `Jenkinsfile` — описание CI/CD пайплайна Jenkins, использующего подключаемую библиотеку `security-library` для запуска различных сканеров и интеграции с системой управления уязвимостями DefectDojo.

## Цель

Данный проект используется в учебных целях для демонстрации автоматизированной системы безопасности в рамках CI/CD:

- запуск **статического анализа кода (SAST)** с помощью Semgrep;
- запуск **анализа IaC конфигураций** с помощью KICS;
- сбор и анализ **компонентного состава контейнера (SCA)** с помощью Syft и Grype;
- **запуск приложения** Juice Shop в Docker-контейнере;
- проведение **динамического анализа (DAST)** с помощью OWASP ZAP и Nuclei;
- загрузка всех результатов в **DefectDojo** для управления уязвимостями и генерации отчётов. (В РАЗРАБОТКЕ)

## Пример пайплайна

Пайплайн реализован в `Jenkinsfile` и состоит из следующих стадий:

1. `Checkout` — загрузка кода из репозитория.
2. `Semgrep Scan` — анализ исходного кода.
3. `KICS Scan` — анализ IaC-файлов.
4. `SCA Scan (Syft & Grype)` — анализ зависимостей контейнера.
5. `Run Docker Container` — развёртывание Juice Shop для DAST.
6. `DAST Scan (ZAP)` — сканирование приложения на запущенном контейнере.
7. `DAST Scan (Nuclei)` — дополнительное DAST-сканирование.
8. `Move Reports` — перенос отчётов в рабочую директорию Jenkins.
9. `Build Uploader Image` — сборка Docker-образа загрузчика для DefectDojo.
10. `Send Reports to DefectDojo` — загрузка отчётов с уязвимостями в DefectDojo через локальный контейнер.

## Интеграции

- **DefectDojo**: используется для централизованного хранения и анализа отчётов сканирования. (В РАЗРАБОТКЕ)
- **Jenkins Shared Library (`security-library`)**: используется для повторного использования скриптов запуска сканеров и отправки отчётов.

## Используемые инструменты безопасности

| Инструмент   | Тип анализа | Назначение                         |
|-------------|-------------|------------------------------------|
| Semgrep     | SAST        | Поиск уязвимостей в исходном коде |
| KICS        | IaC         | Анализ конфигураций Terraform      |
| Syft        | SCA         | SBOM из контейнера             |
| Grype       | SCA         | Поиск уязвимостей в SBOM            |
| OWASP ZAP   | DAST        | Активный DAST-анализ               |
| Nuclei      | DAST        | Шаблонный DAST-анализ              |

## Пример запуска

```groovy
@Library('security-library') _

pipeline {
  ...
}
```
